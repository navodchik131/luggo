# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é Luggo –Ω–∞ production —Å–µ—Ä–≤–µ—Ä

## üìã –ß—Ç–æ –±—ã–ª–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ –≤ —ç—Ç–æ–º —Ä–µ–ª–∏–∑–µ:

### ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
- üîí **–£—Å—Ç—Ä–∞–Ω–µ–Ω—ã —É—Ç–µ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö** - –∑–∞–º–µ–Ω–µ–Ω–æ 200+ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö console.log
- üé® **–£–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è** —Å —É—Ä–æ–≤–Ω—è–º–∏ (ERROR, WARN, INFO, DEBUG)
- üßπ **–ß–∏—Å—Ç–∞—è –∫–æ–Ω—Å–æ–ª—å** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - —É–±—Ä–∞–Ω —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —à—É–º
- üì± **–¢–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è** –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- üõ°Ô∏è **Production-ready** –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ **Backend —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã ES6/CommonJS –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
- ‚úÖ **WebSocket –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω** - –º–µ–Ω—å—à–µ —à—É–º–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–ª—É—á—à–µ–Ω–∞** - –º–µ–Ω—å—à–µ –æ–ø–µ—Ä–∞—Ü–∏–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **–¢–µ—Å—Ç—ã –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã** –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (/admin/tests)

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- üìù **LOGGING_GUIDE.md** - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—é –¥–ª—è –∫–æ–º–∞–Ω–¥—ã
- üîí **SECURITY_REPORT.md** - –æ—Ç—á–µ—Ç –æ –º–µ—Ä–∞—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üñ•Ô∏è –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É:
```bash
ssh root@luggo.ru
```

### 2. –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:
```bash
cd /var/www/luggo
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:
```bash
git pull origin main
```

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ backend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
```bash
cd backend
npm install
```

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ frontend –∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞:
```bash
cd ../frontend
npm install
npm run build
```

### 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ backend —á–µ—Ä–µ–∑ PM2:
```bash
pm2 restart luggo-backend
pm2 status
```

### 7. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ nginx (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
nginx -t

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ nginx
systemctl reload nginx
```

### 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ backend
curl http://localhost:3001/api/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ frontend
curl -I https://luggo.ru

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
pm2 logs luggo-backend --lines 20
```

## üëë –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

### –°–ø–æ—Å–æ–± 1: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)
```bash
cd /var/www/luggo/backend
node scripts/createAdmin.js
```

**–î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- Email: `admin@luggo.ru`
- –ü–∞—Ä–æ–ª—å: `LuggoAdmin2025!`
- –ò–º—è: `–ì–ª–∞–≤–Ω—ã–π –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä`

### –°–ø–æ—Å–æ–± 2: –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```bash
cd /var/www/luggo/backend
node scripts/createAdmin.js --email=boss@luggo.ru --password=SecurePass123 --name="–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤"
```

### –°–ø–æ—Å–æ–± 3: –ü–æ–≤—ã—à–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
cd /var/www/luggo/backend
node scripts/promoteToAdmin.js user@example.com
```

### üìã –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
1. –ó–∞–π—Ç–∏ –Ω–∞ https://luggo.ru/login
2. –í–æ–π—Ç–∏ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ email –∏ –ø–∞—Ä–æ–ª–µ–º
3. –ü–µ—Ä–µ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: https://luggo.ru/admin
4. **–í–ê–ñ–ù–û**: –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –≤ –ø—Ä–æ—Ñ–∏–ª–µ –Ω–∞ –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π!

## üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

### ‚úÖ Frontend (https://luggo.ru):
- [ ] –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ —á–∏—Å—Ç–∞—è (—Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–≤—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- [ ] WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

### ‚úÖ Backend API:
- [ ] `/api/health` –æ—Ç–≤–µ—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å–æ–º 200
- [ ] `/api/socket-health` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç WebSocket –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
- [ ] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞

### ‚úÖ Admin –ø–∞–Ω–µ–ª—å (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤):
- [ ] `/admin/tests` –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∞–º
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã API –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
- [ ] –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∑–∞—è–≤–∫–∞–º–∏

## üö® –í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º:

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
```bash
pm2 logs luggo-backend
pm2 restart luggo-backend
```

### Frontend –Ω–µ –æ–±–Ω–æ–≤–∏–ª—Å—è:
```bash
cd /var/www/luggo/frontend
npm run build
# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ nginx
systemctl reload nginx
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
sudo -u postgres psql -c "SELECT version();"
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –∞–¥–º–∏–Ω–∞:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
cd /var/www/luggo/backend
node -e "require('./src/config/init').initializeDatabase().then(() => console.log('DB OK')).catch(console.error)"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∞–¥–º–∏–Ω–æ–≤
node -e "
require('dotenv').config();
require('./src/config/init').initializeDatabase().then(async () => {
  const { User } = require('./src/models');
  const admins = await User.findAll({ where: { role: 'admin' } });
  console.log('–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∞–¥–º–∏–Ω—ã:', admins.map(a => a.email));
  process.exit(0);
});"
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

- **PM2 Dashboard**: `pm2 monit`
- **Nginx –ª–æ–≥–∏**: `/var/log/nginx/error.log`
- **System –ª–æ–≥–∏**: `journalctl -u nginx -f`

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ù–µ—Ç —É—Ç–µ—á–µ–∫ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ª–æ–≥–∞—Ö
‚úÖ **UX**: –ß–∏—Å—Ç–∞—è –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
‚úÖ **DX**: –õ—É—á—à–∞—è –æ—Ç–ª–∞–¥–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ backend
‚úÖ **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ**: –£–¥–æ–±–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–º–∏–Ω–æ–≤

---
*–î–µ–ø–ª–æ–π –æ—Ç: ${new Date().toISOString()}*
*–í–µ—Ä—Å–∏—è: Production v1.2 - Security & Logging Optimization* 

–ö–∞–∫ –æ–±–Ω–æ–≤–ª—è—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

# 1. –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–¥
ssh root@luggo.ru
cd /home/luggo/luggo
git pull origin main

# 2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
cd frontend && npm install
cd ../backend && npm install

# 3. –î–æ–±–∞–≤–ª—è–µ–º SEO —Ä–æ—É—Ç—ã –≤ backend/server.js
# –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å: app.use('/', require('./src/routes/seoRoutes'))

# 4. –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º frontend
cd frontend && npm run build

# 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º backend
pm2 restart luggo-backend

# 6. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º SSL
sudo certbot --nginx -d luggo.ru -d www.luggo.ru

–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
git add -A
git commit -m "üå± FEAT: –°–∏—Å—Ç–µ–º–∞ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–º–∏"
git status
git push origin main